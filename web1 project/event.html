<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>تفاصيل الفعالية - بوابة فعالية دمشق</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Tajawal:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  
  <!-- CSS الخاص بصفحة تفاصيل الفعالية -->
  <style>
    /* ===== صفحة تفاصيل الفعالية ===== */
    .event-details-page {
      padding: 120px 0 80px;
      background: #f8f9fa;
      min-height: 100vh;
    }

    .event-details__container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .event-details__header {
      background: white;
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .event-details__title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #103a33;
      margin-bottom: 20px;
      text-align: center;
    }

    .event-details__meta {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }

    .event-details__meta-item {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #666;
      font-size: 1.1rem;
    }

    .event-details__meta-item i {
      color: #bfa45a;
      font-size: 1.3rem;
    }

    .event-details__badge {
      display: inline-block;
      padding: 8px 20px;
      color: white;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .event-details__content {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 40px;
      margin-bottom: 40px;
    }

    .event-details__main {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .event-details__sidebar {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .event-details__section {
      margin-bottom: 30px;
    }

    .event-details__section-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #103a33;
      margin-bottom: 15px;
      border-right: 4px solid #bfa45a;
      padding-right: 15px;
    }

    .event-details__description {
      line-height: 1.8;
      color: #555;
      font-size: 1.1rem;
    }

    .event-details__goals {
      list-style: none;
      padding: 0;
    }

    .event-details__goals li {
      padding: 8px 0;
      padding-right: 25px;
      position: relative;
      color: #555;
    }

    .event-details__goals li:before {
      content: "✓";
      position: absolute;
      right: 0;
      color: #bfa45a;
      font-weight: bold;
    }

    .event-details__map {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .event-details__map-image {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 15px;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
    }

    .event-details__actions {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      text-align: center;
    }

    .event-details__action-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 30px;
      margin: 0 10px 10px 10px;
      border: none;
      border-radius: 25px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
    }

    .event-details__action-btn--share {
      background: #25D366;
      color: white;
    }

    .event-details__action-btn--calendar {
      background: #4285F4;
      color: white;
    }

    .event-details__action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    /* معرض الصور */
    .event-details__gallery {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }

    .gallery__main-image {
      width: 100%;
      height: 400px;
      object-fit: cover;
      border-radius: 15px;
      margin-bottom: 20px;
      cursor: pointer;
    }

    .gallery__thumbnails {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
    }

    .gallery__thumbnail {
      width: 100%;
      height: 80px;
      object-fit: cover;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .gallery__thumbnail:hover,
    .gallery__thumbnail.active {
      border-color: #bfa45a;
      transform: scale(1.05);
    }

    /* Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .lightbox__image {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
    }

    .lightbox__close {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      background: none;
      border: none;
    }

    /* فعاليات ذات صلة */
    .related-events {
      margin-top: 50px;
    }

    .related-events__title {
      font-size: 2rem;
      font-weight: 700;
      color: #103a33;
      text-align: center;
      margin-bottom: 30px;
    }

    .related-events__grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }

    .related-event-card {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .related-event-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    .related-event-card__image {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .related-event-card__content {
      padding: 20px;
    }

    .related-event-card__title {
      font-size: 1.2rem;
      font-weight: 700;
      color: #103a33;
      margin-bottom: 10px;
    }

    .related-event-card__meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 15px;
    }

    .related-event-card__btn {
      display: block;
      text-align: center;
      padding: 10px 20px;
      background: #103a33;
      color: white;
      text-decoration: none;
      border-radius: 20px;
      font-weight: 600;
      transition: all 0.3s;
    }

    .related-event-card__btn:hover {
      background: #bfa45a;
      color: #103a33;
    }

    /* ألوان البادجات حسب النوع */
    .event-details__badge[data-type="خيري"] { background: #e74c3c; }
    .event-details__badge[data-type="تطوعي"] { background: #2ecc71; }
    .event-details__badge[data-type="ثقافي"] { background: #9b59b6; }
    .event-details__badge[data-type="بيئي"] { background: #3498db; }

    /* الوضع الداكن */
    body.dark-mode .event-details-page {
      background: #0d2824;
    }

    body.dark-mode .event-details__header,
    body.dark-mode .event-details__main,
    body.dark-mode .event-details__map,
    body.dark-mode .event-details__actions,
    body.dark-mode .event-details__gallery,
    body.dark-mode .related-event-card {
      background: #1b3d38;
      color: #e0e0e0;
    }

    body.dark-mode .event-details__title,
    body.dark-mode .event-details__section-title,
    body.dark-mode .related-events__title,
    body.dark-mode .related-event-card__title {
      color: #bfa45a;
    }

    body.dark-mode .event-details__description,
    body.dark-mode .event-details__meta-item,
    body.dark-mode .event-details__goals li {
      color: #ccc;
    }

    body.dark-mode .event-details__map-image {
      background: #2d4a44;
      color: #ccc;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .event-details__content {
        grid-template-columns: 1fr;
      }
      
      .event-details__meta {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }
      
      .event-details__action-btn {
        display: block;
        margin: 10px 0;
        width: 100%;
      }
      
      .event-details__title {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>

  <!-- الـ Navbar -->
  <header class="site-header">
    <nav id="mainNav" class="navbar navbar-expand-lg custom-navbar">
      <div class="container-fluid d-flex justify-content-between align-items-center px-4">
        <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
          <img src="img/logo.png" alt="DEG" class="logo">
          <div class="brand-text">
            <div class="deg">D&nbsp;&nbsp;E&nbsp;&nbsp;G</div>
            <div class="site-name">بوابة فعالية دمشق</div>
          </div>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-center" id="navMenu">
          <ul class="navbar-nav gap-3 text-center">
            <li class="nav-item"><a class="nav-link" href="index.html">الرئيسية</a></li>
            <li class="nav-item"><a class="nav-link" href="events.html">الفعاليات</a></li>
            <li class="nav-item"><a class="nav-link active" href="about.html">عن الدليل</a></li>
            <li class="nav-item"><a class="nav-link" href="contact.html">اتصل بنا</a></li>
          </ul>
        </div>

        <div class="d-flex align-items-center gap-3">
          <button id="modeToggle" class="mode-toggle" title="تبديل الوضع">🌙</button>
          <div class="lang-switch d-flex align-items-center">
            <button class="flag-btn" data-lang="ar" id="flag-sy" title="العربية">
              <img src="img/Flag-Syria.png" alt="العربية">
            </button>
            <button class="flag-btn" data-lang="en" id="flag-us" title="English">
              <img src="img/Flag-United-States-of-America.png" alt="English">
            </button>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- قسم تفاصيل الفعالية -->
  <section class="event-details-page" id="event-details-page">
    <div class="container event-details__container">
      <!-- رأس الفعالية -->
      <div class="event-details__header">
        <h1 class="event-details__title" id="eventTitle">جاري تحميل الفعالية...</h1>
        <div class="event-details__meta">
          <div class="event-details__meta-item">
            <i>📅</i>
            <span id="eventDate">--</span>
          </div>
          <div class="event-details__meta-item">
            <i>📍</i>
            <span id="eventLocation">--</span>
          </div>
          <div class="event-details__meta-item">
            <i>⏰</i>
            <span id="eventTime">--</span>
          </div>
        </div>
        <div class="event-details__badge" id="eventType" data-type="">--</div>
      </div>

      <!-- المحتوى الرئيسي -->
      <div class="event-details__content">
        <!-- القسم الرئيسي -->
        <div class="event-details__main">
          <!-- الوصف -->
          <div class="event-details__section">
            <h2 class="event-details__section-title">وصف الفعالية</h2>
            <p class="event-details__description" id="eventDescription">
              جاري تحميل وصف الفعالية...
            </p>
          </div>

          <!-- الأهداف -->
          <div class="event-details__section">
            <h2 class="event-details__section-title">أهداف الفعالية</h2>
            <ul class="event-details__goals" id="eventGoals">
              <li>جاري تحميل الأهداف...</li>
            </ul>
          </div>

          <!-- المتطلبات -->
          <div class="event-details__section">
            <h2 class="event-details__section-title">متطلبات المشاركة</h2>
            <p class="event-details__description" id="eventRequirements">
              جاري تحميل المتطلبات...
            </p>
          </div>
        </div>

        <!-- الشريط الجانبي -->
        <div class="event-details__sidebar">
          <!-- الخريطة -->
          <div class="event-details__map">
            <h2 class="event-details__section-title">موقع الفعالية</h2>
            <div class="event-details__map-image" id="eventMap">
              جاري تحميل الخريطة...
            </div>
            <p class="event-details__description" style="margin-top: 15px; text-align: center;" id="eventLocationText">
              📍 جاري تحميل الموقع...
            </p>
          </div>

          <!-- أزرار المشاركة -->
          <div class="event-details__actions">
            <h2 class="event-details__section-title">مشاركة الفعالية</h2>
            <button class="event-details__action-btn event-details__action-btn--share" onclick="shareEvent()">
              <i>📱</i> مشاركة عبر واتساب
            </button>
            <button class="event-details__action-btn event-details__action-btn--calendar" onclick="addToCalendar()">
              <i>📅</i> إضافة للتقويم
            </button>
          </div>
        </div>
      </div>

      <!-- معرض الصور -->
      <div class="event-details__gallery">
        <h2 class="event-details__section-title">معرض الصور</h2>
        <img src="" alt="صورة رئيسية للفعالية" class="gallery__main-image" id="mainGalleryImage" style="display: none;">
        <div class="gallery__thumbnails" id="galleryThumbnails">
          <!-- سيتم تعبئة الصور المصغرة بالجافاسكريبت -->
        </div>
      </div>

      <!-- فعاليات ذات صلة -->
      <div class="related-events">
        <h2 class="related-events__title">فعاليات ذات صلة</h2>
        <div class="related-events__grid" id="relatedEventsGrid">
          <!-- سيتم تعبئة الفعاليات ذات الصلة بالجافاسكريبت -->
        </div>
      </div>
    </div>
  </section>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox__close" onclick="closeLightbox()">×</button>
    <img src="" alt="" class="lightbox__image" id="lightboxImage">
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>© 2025 بوابة فعالية دمشق - جميع الحقوق محفوظة</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/main.js"></script>

  <!-- JavaScript الخاص بصفحة التفاصيل -->
  <script>
    // بيانات الفعاليات (يجب أن تكون متطابقة مع البيانات في main.js)
   // بيانات جميع الفعاليات العشرة
const eventsDatabase = {
    1: {
        id: 1,
        title: "بازار دمشق للأمل",
        type: "خيري",
        date: "10 تشرين الأول 2025",
        time: "10:00 صباحاً - 6:00 مساءً",
        location: "دمشق - ساحة الأمويين",
        description: "معرض خيري يضم منتجات حرفية وبيتية يدوية الصنع، يهدف إلى دعم العائلات المتضررة في دمشق. يتضمن الفعالية أقساماً متنوعة للمأكولات التقليدية، المنتجات اليدوية، والأعمال الفنية. جميع العائدات تذهب لدعم الأسر المحتاجة وتأهيل المنازل المتضررة.",
        goals: [
            "جمع التبرعات لدعم الأسر المتضررة",
            "تشجيع الحرف اليدوية التقليدية", 
            "تعزيز روح التكافل الاجتماعي",
            "تأهيل 50 منزلاً متضرراً"
        ],
        requirements: "الفعالية مفتوحة للجميع. يمكنك المشاركة كزائر أو متطوع في تنظيم الفعالية. للمتطوعين: يرجى التسجيل مسبقاً عبر صفحة التواصل.",
        mapImage: "img/map-damascus.jpg",
        mainImage: "img/bazar.jpg",
        galleryImages: ["img/bazar.jpg", "img/bazar2.jpg", "img/bazar3.jpg"],
        relatedEvents: [2, 3, 4]
    },
    2: {
        id: 2,
        title: "إعادة تشجير الغوطة", 
        type: "بيئي",
        date: "13 تشرين الأول 2025",
        time: "8:00 صباحاً - 2:00 مساءً",
        location: "ريف دمشق - الغوطة الشرقية",
        description: "يوم تطوعي لزراعة الأشجار في المناطق المتضررة في الغوطة الشرقية. ندعو المتطوعين للمساعدة في زراعة الآلاف من الأشجار لاستعادة الغطاء النباتي والمساهمة في إعادة إعمار المنطقة.",
        goals: [
            "زراعة 5000 شجرة في المنطقة",
            "تعزيز الوعي البيئي لدى المجتمع",
            "استعادة الغطاء النباتي في المناطق المتضررة",
            "تشجيع العمل التطوعي الجماعي"
        ],
        requirements: "الفعالية مفتوحة للمتطوعين من جميع الأعمار. يرجى ارتداء ملابس مريحة ومناسبة للعمل في الهواء الطلق، وإحضار قفازات إذا أمكن.",
        mapImage: "img/map-ghouta.jpg",
        mainImage: "img/tree.png",
        galleryImages: ["img/tree.png", "img/ghouta1.jpg", "img/ghouta2.jpg"],
        relatedEvents: [1, 5, 7]
    },
    10: {
        id: 3,
        title: "مهرجان الأطفال للسلام",
        type: "خيري", 
        date: "22 كانون الأول 2025",
        time: "10:00 صباحاً - 4:00 مساءً",
        location: "دمشق - حديقة الأمة",
        description: "نشاط ترفيهي وتعليمي مميز للأطفال، يتضمن ألعاباً ترفيهية، مسابقات رسم، ورش عمل تعليمية، وعروض مسرحية. نهدف إلى رسم البسمة على وجوه الأطفال وتقديم الدعم النفسي والمعنوي لهم.",
        goals: [
            "تقديم الدعم النفسي والترفيهي للأطفال",
            "تعزيز ثقافة السلام والتسامح",
            "تنمية مواهب الأطفال وإبداعاتهم",
            "خلق مساحة آمنة للعب والتعلم"
        ],
        requirements: "الفعالية مخصصة للأطفال من عمر 5 إلى 12 سنة. يرجى تسجيل الأطفال مسبقاً عبر الموقع أو الحضور مباشرة مع أولياء الأمور.",
        mapImage: "img/map-park.jpg",
        mainImage: "img/kids.jpg",
        galleryImages: ["img/kids.jpg", "img/kids2.jpg", "img/kids3.jpg"],
        relatedEvents: [1, 6, 10]
    },
    4: {
        id: 4,
        title: "يوم تطوعي لترميم المدارس",
        type: "تطوعي",
        date: "5 تشرين الثاني 2025", 
        time: "9:00 صباحاً - 3:00 مساءً",
        location: "دمشق - عدة مدارس حكومية",
        description: "مبادرة تطوعية تجمع طلاب الجامعات والمتطوعين للمساهمة في ترميم وتجميل المدارس الحكومية في دمشق. تشمل الأعمال إصلاح المقاعد، طلاء الجدران، وتنظيف الساحات.",
        goals: [
            "ترميم 10 مدارس حكومية",
            "توفير بيئة تعليمية ملائمة للطلاب",
            "تشجيع العمل التطوعي بين الشباب",
            "تعزيز المشاركة المجتمعية في التعليم"
        ],
        requirements: "الفعالية مفتوحة للمتطوعين من عمر 18 سنة فما فوق. يرجى التسجيل مسبقاً وتحديد المدرسة المطلوبة.",
        mapImage: "img/map-schools.jpg",
        mainImage: "img/schools_rebulid.png",
        galleryImages: ["img/schools_rebulid.png", "img/schools2.jpg", "img/schools3.jpg"],
        relatedEvents: [2, 5, 8]
    },
    5: {
        id: 5,
        title: "حملة كتاب لكل بيت",
        type: "ثقافي",
        date: "9 تشرين الثاني 2025",
        time: "11:00 صباحاً - 5:00 مساءً", 
        location: "دمشق - مكتبة الأسد الوطنية",
        description: "مبادرة ثقافية تهدف إلى توزيع الكتب المستعملة والجديدة على الأسر في مختلف أحياء دمشق. تشمل الفعالية معرضاً للكتاب المستعمل وورش قراءة للأطفال.",
        goals: [
            "توزيع 5000 كتاب مجاناً",
            "تشجيع ثقافة القراءة في المجتمع",
            "إتاحة المعرفة للجميع",
            "إعادة تدوير الكتب المستعملة"
        ],
        requirements: "الفعالية مفتوحة للجميع. يمكن التبرع بالكتب المستعملة أو الحصول على كتب مجانية.",
        mapImage: "img/map-library.jpg",
        mainImage: "img/book.jpg",
        galleryImages: ["img/book.jpg", "img/books2.jpg", "img/books3.jpg"],
        relatedEvents: [3, 6, 9]
    },
    6: {
        id: 6,
        title: "سوق رمضان الخيري",
        type: "خيري",
        date: "18 تشرين الثاني 2025",
        time: "4:00 عصراً - 10:00 مساءً",
        location: "باب توما - السوق القديم",
        description: "سوق خيري تقليدي يقام في شهر رمضان المبارك، يضم منتجات غذائية وحرفية محلية. جميع العائدات تذهب لدعم الأسر المحتاجة قبل حلول عيد الفطر.",
        goals: [
            "دعم 100 أسرة محتاجة",
            "تشجيع المنتجات المحلية",
            "إحياء تقاليد السوق الرمضاني",
            "تعزيز التكافل الاجتماعي"
        ],
        requirements: "الفعالية مفتوحة للجميع. يمكن للمتاجرين المحليين المشاركة بتقديم منتجاتهم.",
        mapImage: "img/map-babtoma.jpg",
        mainImage: "img/ramadan.png",
        galleryImages: ["img/ramadan.png", "img/ramadan2.jpg", "img/ramadan3.jpg"],
        relatedEvents: [1, 4, 7]
    },
    7: {
        id: 7,
        title: "مبادرة شارع نظيف",
        type: "تطوعي",
        date: "22 تشرين الأول 2025",
        time: "8:00 صباحاً - 12:00 ظهراً",
        location: "دمشق - الأحياء القديمة",
        description: "مبادرة تطوعية لتنظيف وتجميل أحياء دمشق القديمة بمشاركة الأهالي والمتطوعين. تشمل أعمال التنظيف، الطلاء، وزراعة الأشجار في الشوارع.",
        goals: [
            "تنظيف 5 أحياء قديمة",
            "زراعة 200 شجرة في الشوارع",
            "تعزيز الوعي البيئي",
            "إشراك المجتمع في الحفاظ على المدينة"
        ],
        requirements: "الفعالية مفتوحة لجميع المتطوعين. سيتم توفير أدوات التنظيف والسلامة.",
        mapImage: "img/map-oldcity.jpg",
        mainImage: "img/clean.png",
        galleryImages: ["img/clean.png", "img/clean2.jpg", "img/clean3.jpg"],
        relatedEvents: [2, 4, 8]
    },
    8: {
        id: 8,
        title: "اليوم المفتوح للجامعات",
        type: "ثقافي",
        date: "1 كانون الأول 2025",
        time: "9:00 صباحاً - 4:00 مساءً",
        location: "دمشق - جامعة دمشق",
        description: "فعالية تعليمية تثقيفية تستقبل الأهالي والطلاب الجدد لتعريفهم بفرص التعليم المتاحة في الجامعات السورية. تشمل جولات في الكليات وورش توجيه مهني.",
        goals: [
            "استقبال 2000 طالب وأهالي",
            "توفير التوجيه الأكاديمي والمهني",
            "تعريف الطلاب بالتخصصات المتاحة",
            "تسهيل عملية اختيار التخصص الجامعي"
        ],
        requirements: "الفعالية مجانية ومفتوحة لطلاب الثانوية وأهاليهم. يفضل التسجيل المسبق.",
        mapImage: "img/map-university.jpg",
        mainImage: "img/un.jpg",
        galleryImages: ["img/un.jpg", "img/university2.jpg", "img/university3.jpg"],
        relatedEvents: [5, 9, 10]
    },
    9: {
        id: 9,
        title: "مهرجان الطعام الدمشقي",
        type: "خيري",
        date: "10 كانون الأول 2025",
        time: "12:00 ظهراً - 8:00 مساءً",
        location: "باب توما - الساحة الرئيسية",
        description: "مهرجان تراثي يقدم أكلات شعبية دمشقية تقليدية مع عروض فلكلورية وحرف يدوية. يعكس المهرجان التراث الغني لمدينة دمشق عبر الأطعمة والفنون.",
        goals: [
            "إحياء التراث الغذائي الدمشقي",
            "دعم الحرفيين والمطاعم المحلية",
            "جمع تبرعات للأسر المحتاجة",
            "تعزيز السياحة المحلية"
        ],
        requirements: "الفعالية مفتوحة للجميع. يمكن للحرفيين والمطاعم المشاركة بتقديم منتجاتهم.",
        mapImage: "img/map-foodfestival.jpg",
        mainImage: "img/food.jpg",
        galleryImages: ["img/food.jpg", "img/food2.jpg", "img/food3.jpg"],
        relatedEvents: [1, 6, 8]
    },
    3: {
        id: 10,
        title: "معرض صور دمشق تنهض",
        type: "ثقافي",
        date: "15 تشرين الأول 2025",
        time: "10:00 صباحاً - 7:00 مساءً",
        location: "دمشق - المتحف الوطني",
        description: "معرض فوتوغرافي يوثق رحلة إعادة إعمار دمشق عبر صور قبل وبعد التحرير. يسلط الضوء على إنجازات إعادة الإعمار وصمود أهل دمشق.",
        goals: [
            "توثيق رحلة إعادة الإعمار",
            "تسليط الضوء على إنجازات المدينة",
            "تعزيز الروح المعنوية للمواطنين",
            "الحفاظ على الذاكرة البصرية للمدينة"
        ],
        requirements: "المعرض مفتوح للجميع مجاناً. يمكن للهواة والمحترفين المشاركة بأعمالهم.",
        mapImage: "img/map-museum.jpg",
        mainImage: "img/photo_damas.jpeg",
        galleryImages: ["img/photo_damas.jpeg", "img/photos2.jpg", "img/photos3.jpg"],
        relatedEvents: [3, 5, 8]
    }
};

    // تحميل بيانات الفعالية بناءً على ID في الرابط
    function loadEventData() {
        const urlParams = new URLSearchParams(window.location.search);
        const eventId = urlParams.get('id');

        if (!eventId) {
            showError("لم يتم تحديد فعالية.");
            return;
        }

        const eventData = eventsDatabase[eventId];

        if (!eventData) {
            showError("لم يتم العثور على الفعالية المطلوبة.");
            return;
        }

        // تعبئة البيانات في الصفحة
        document.getElementById('eventTitle').textContent = eventData.title;
        document.getElementById('eventDate').textContent = eventData.date;
        document.getElementById('eventLocation').textContent = eventData.location;
        document.getElementById('eventTime').textContent = eventData.time;
        
        // تحديث البادج
        const eventTypeBadge = document.getElementById('eventType');
        eventTypeBadge.textContent = eventData.type;
        eventTypeBadge.setAttribute('data-type', eventData.type);
        
        // تحديث الوصف والمتطلبات
        document.getElementById('eventDescription').textContent = eventData.description;
        document.getElementById('eventRequirements').textContent = eventData.requirements;
        document.getElementById('eventLocationText').textContent = `📍 ${eventData.location}`;

        // تحديث الأهداف
        const goalsList = document.getElementById('eventGoals');
        goalsList.innerHTML = '';
        eventData.goals.forEach(goal => {
            const li = document.createElement('li');
            li.textContent = goal;
            goalsList.appendChild(li);
        });

        // تحديث الخريطة
        const mapContainer = document.getElementById('eventMap');
        mapContainer.innerHTML = `<img src="${eventData.mapImage}" alt="خريطة ${eventData.location}" style="width:100%; height:100%; object-fit:cover; border-radius:15px;">`;

        // تحديث معرض الصور
        updateGallery(eventData);

        // تحديث الفعاليات ذات الصلة
        updateRelatedEvents(eventData);

        // تحديث عنوان الصفحة
        document.title = `${eventData.title} - بوابة فعالية دمشق`;
    }

    function updateGallery(eventData) {
        const mainImage = document.getElementById('mainGalleryImage');
        const thumbnailsContainer = document.getElementById('galleryThumbnails');

        if (eventData.galleryImages && eventData.galleryImages.length > 0) {
            mainImage.src = eventData.galleryImages[0];
            mainImage.style.display = 'block';
            mainImage.alt = eventData.title;

            thumbnailsContainer.innerHTML = '';
            
            eventData.galleryImages.forEach((imageSrc, index) => {
                const thumb = document.createElement('img');
                thumb.src = imageSrc;
                thumb.alt = `صورة ${index + 1} لـ ${eventData.title}`;
                thumb.className = index === 0 ? 'gallery__thumbnail active' : 'gallery__thumbnail';
                thumb.setAttribute('data-full', imageSrc);

                thumb.addEventListener('click', function() {
                    // تحديث الصورة الرئيسية
                    mainImage.src = imageSrc;
                    
                    // تحديث الحالة النشطة
                    document.querySelectorAll('.gallery__thumbnail').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });

                thumbnailsContainer.appendChild(thumb);
            });
        } else {
            document.querySelector('.event-details__gallery').style.display = 'none';
        }
    }

    function updateRelatedEvents(eventData) {
        const relatedContainer = document.getElementById('relatedEventsGrid');
        
        if (!eventData.relatedEvents || eventData.relatedEvents.length === 0) {
            document.querySelector('.related-events').style.display = 'none';
            return;
        }

        relatedContainer.innerHTML = '';
        
        eventData.relatedEvents.forEach(relatedId => {
            const relatedEvent = eventsDatabase[relatedId];
            if (relatedEvent) {
                const eventCard = document.createElement('div');
                eventCard.className = 'related-event-card';
                eventCard.innerHTML = `
                    <img src="${relatedEvent.mainImage}" alt="${relatedEvent.title}" class="related-event-card__image">
                    <div class="related-event-card__content">
                        <h3 class="related-event-card__title">${relatedEvent.title}</h3>
                        <div class="related-event-card__meta">
                            <span>📍 ${relatedEvent.location}</span>
                            <span>📅 ${relatedEvent.date}</span>
                        </div>
                        <a href="event.html?id=${relatedEvent.id}" class="related-event-card__btn">عرض التفاصيل</a>
                    </div>
                `;
                relatedContainer.appendChild(eventCard);
            }
        });
    }

    function showError(message) {
        document.getElementById('eventTitle').textContent = 'خطأ';
        document.getElementById('eventDescription').textContent = message;
    }

    // Lightbox functionality
    function initGallery() {
        const mainImage = document.getElementById('mainGalleryImage');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightboxImage');

        // فتح Lightbox عند النقر على الصورة الرئيسية
        if (mainImage) {
            mainImage.addEventListener('click', function() {
                lightboxImage.src = this.src;
                lightbox.style.display = 'flex';
            });
        }

        // إغلاق Lightbox عند النقر خارج الصورة
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });
    }

    function closeLightbox() {
        document.getElementById('lightbox').style.display = 'none';
    }

    // مشاركة الفعالية عبر واتساب
    function shareEvent() {
        const eventTitle = document.getElementById('eventTitle').textContent;
        const eventUrl = window.location.href;
        const shareText = `انضم إلى فعالية: ${eventTitle}\n${eventUrl}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
        window.open(whatsappUrl, '_blank');
    }

    // إضافة إلى التقويم
    function addToCalendar() {
        const eventTitle = document.getElementById('eventTitle').textContent;
        const eventDate = document.getElementById('eventDate').textContent;
        const eventLocation = document.getElementById('eventLocation').textContent;
        
        // إنشاء رابط تقويم Google
        const startDate = '20251010T100000'; // تنسيق: YYYYMMDDTHHMMSS
        const endDate = '20251010T180000';
        
        const googleCalendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventTitle)}&dates=${startDate}/${endDate}&details=${encodeURIComponent('فعالية خيرية في دمشق')}&location=${encodeURIComponent(eventLocation)}`;
        
        window.open(googleCalendarUrl, '_blank');
    }

    // تهيئة الصفحة عند التحميل
    document.addEventListener('DOMContentLoaded', function() {
        loadEventData();
        initGallery();
    });

    // إغلاق Lightbox بالزر ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeLightbox();
        }
    });
  </script>
</body>
</html>


















